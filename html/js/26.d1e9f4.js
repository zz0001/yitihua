webpackJsonp([26],{1464:function(t,e,o){t.exports=o.p+"image/icon_dz.e8ca6c.png"},1992:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(1993),n=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);e.default=n.a},1993:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(52),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={name:"photographEdit",data:function(){return{imageList:[],detailList:[],address:"",textAreaVal:""}},created:function(){},mounted:function(){this._getCurrentLocation(),this._getLocation(),window.picture_upImg=""},methods:{_getLocation:function(){var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(this._showPosition,function(e){switch(console.log("进入定位错误回调"),console.log(e.message),e.code){case e.PERMISSION_DENIED:console.log("用户拒绝对获取地理位置的请求。");break;case e.POSITION_UNAVAILABLE:console.log("位置信息是不可用的。");break;case e.TIMEOUT:console.log("请求用户地理位置超时。");break;case e.UNKNOWN_ERROR:console.log("未知错误。")}setTimeout(t._getLocation,500)},{enableHighAccuracy:!1,timeout:1e4,maximumAge:0}):alert("是否开启了GPS功能")},_showPosition:function(t){isNull(t.coords.longitude)?toast("坐标为空,请重新定位"):(console.log("定位成功，进入_showPosition"),window.longitude=t.coords.longitude,window.latitude=t.coords.latitude,window.choiceLongitude=t.coords.longitude,window.choiceLatitude=t.coords.latitude)},_getCurrentLocation:function(){var t=this,e=new BMap.Geolocation;e.enableSDKLocation(),e.getCurrentPosition(function(o){console.log((0,n.default)(o)),e.getStatus()==BMAP_STATUS_SUCCESS?(console.log("地址："+o.address.province+o.address.city+o.address.district+o.address.street+o.address.street_number),t.address=o.address.province+o.address.city+o.address.district+o.address.street+o.address.street_number):console.log("定位failed："+e.getStatus())})},handle:function(){var t=this;console.log(this.textAreaVal),window.picture_array=this.imageList,this.imageList||(window.picture_array=""),this.$createPotDialog({$props:{type:"confirm",content:"确认保存本次提交吗？"},$events:{confirm:function(e){window.leadercommitFlag=1,!isNull(window.picture_array)||window.picture_array.length>0?(window.picture_upImg="",t.publicOpinion_upPicture(window.picture_array[0],1)):t.appWorkOrder_leaderOrderReport()}}}).show()},publicOpinion_upPicture:function(t,e){var o=this;console.log("图片张数："+window.picture_array.length+"；当前第"+e+"张");var i="";i+=toJson("base64Str",t),doPost("app_publicOpinion_upPic.action",i,function(t){if(0==t.code){if(e<parseInt(window.picture_array.length)){console.log("当前上传第:"+e+"张,下次上传第"+e+"张");var i=parseInt(e)+1;o.publicOpinion_upPicture(window.picture_array[e],i)}else console.log("图片上传结束");isNull(window.picture_upImg)?window.picture_upImg=t.datas.path:window.picture_upImg=window.picture_upImg+";"+t.datas.path,console.log("当前type"+e+"；总共张数："+window.picture_array.length),parseInt(e)==window.picture_array.length?(o.appWorkOrder_leaderOrderReport(),console.log("type和图片长度相等"+e)):console.log("type和图片长度不相等")}else toast(t.message)},"","")},appWorkOrder_leaderOrderReport:function(){var t=this,e="";e+=toJson("origin","3")+"&",e+=toJson("loginId",window.localStorage.loginId)+"&",e+=toJson("problem",this.textAreaVal)+"&",e+=toJson("reportPics",window.picture_upImg)+"&",e+=toJson("longitude",window.choiceLongitude)+"&",e+=toJson("latitude",window.choiceLatitude)+"&",e+=toJson("location",this.address),doPost("dsb.action",e,function(e){window.leadercommitFlag=0,0==e.code?(hideLoading(),toast(e.message),window.originType="3",t.$router.push({path:"/welcome",query:{}})):(hideLoading(),toast(e.message))},"","")},showAlreadyList:function(){this.$router.push({path:"/photoAlreadyCase",query:{}})}}}},1994:function(t,e){},2596:function(t,e,o){"use strict";var i=o(2597);o.d(e,"a",function(){return i.a}),o.d(e,"b",function(){return i.b})},2597:function(t,e,o){"use strict";o.d(e,"a",function(){return i}),o.d(e,"b",function(){return n});var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sspEdit"},[i("tk-header",[i("div",[t._v("随手拍")]),t._v(" "),i("div",{attrs:{slot:"right"},on:{click:t.showAlreadyList},slot:"right"},[t._v("已上报")])]),t._v(" "),i("tk-container",[i("div",{staticClass:"photograph-title"},[t._v("上传图片")]),t._v(" "),i("tk-upload-photo",{model:{value:t.imageList,callback:function(e){t.imageList=e},expression:"imageList"}}),t._v(" "),i("div",{staticClass:"locate"},[i("span",[i("img",{staticClass:"location-img",attrs:{src:o(1464),alt:""}})]),t._v(" "),i("span",[t._v(t._s(t.address))])]),t._v(" "),i("tk-textarea",{attrs:{placeholder:"请输入问题描述"},model:{value:t.textAreaVal,callback:function(e){t.textAreaVal=e},expression:"textAreaVal"}}),t._v(" "),i("tk-button",{staticClass:"cl_btn",on:{click:t.handle}},[t._v("处理")])],1)],1)},n=[]},2598:function(t,e,o){"use strict";var i=o(1994),n=o.n(i);n.a},644:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(2596),n=o(1992);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);var r=(o(2598),o(0)),s=Object(r.a)(n.default,i.a,i.b,!1,null,null,null);e.default=s.exports}});