webpackJsonp([106],{1668:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(1669),r=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);t.default=r.a},1669:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"",mounted:function(){function e(){var e=new Media(window.wjpwDataDirFileSystem.nativeURL+"/myrecording.mp3",function(){console.log("Media_succ")},function(){console.log("Media_fail")});e.startRecord();try{clearInterval($("#reply_page").data("rememberTimer"))}catch(e){}var t=0;rememberTimer=setInterval(function(){t+=1,$(".recoedTime").html(t+"'s")},1e3),$("#reply_page").data("mediaRec",e),$("#reply_page").data("rememberTimer",rememberTimer)}function t(){var e=$("#reply_page").data("mediaRec");e.stopRecord(),e.release(),$(".recordStart").hide(),$(".recordFinish").show(),clearInterval($("#reply_page").data("rememberTimer"))}function i(){function e(e){e.root.getFile("zjmanagement/data/myrecording.mp3",{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){a(e.target.result,"3")},t.readAsDataURL(e)},function(){console.log("file error ")})},function(){console.log("获取文件失败！")})}function t(){toast("路径请求失败！！")}if(!$("#reply_page").data("mediaRec"))return void saveImplementEdit();window.requestFileSystem(LocalFileSystem.PERSISTENT,5242880,e,t)}function a(e,t){var i="";i+=toJson("base64Str",e),doPost("app_upAudio.action",i,function(e){0==e.code?saveImplementEdit(e.data):toast(e.message)},"","")}function r(){$("#reply_page").data("taskdetail",null),$("#reply_page").data("centerTaskDept",null),$("#reply_page").data("taskDept",null),$("#reply_page").data("taskno",""),$("#reply_page").data("taskDeptArray",[])}function n(e,t){parseInt(t)<2&&$("#deply_html").empty();var i="";i+=toJson("projectno",window.localStorage.implementationid)+"&",i+=toJson("pageSize","20")+"&",i+=toJson("pageNum",t),doPost("findSuperviseList.action",i,function(t){if(e||hideLoading(),t.total>0){e&&e(!0);var i=t.datas;if(getDataLength(t.total,6),t.datas.length<20&&(console.log("进来了"),window.checkNum=2),console.log("长度："+t.total),!isNull(i)&&i.length>0){for(var a="",r=0;r<i.length;r++){if(a+='<div style="background: #fff;"><div style="padding: 0.5em;">'+i[r].suggestion+"</div>",a+='<div><div style="display:inline-block;width:46%;padding: 0.5em;vertical-align: middle;">',a+='<div style="padding: 0.5em 0; color: #aaa;">督办人：'+i[r].userName+"</div>",a+='<div style="padding: 0.5em 0; color: #aaa;">'+i[r].createTime+"</div></div>",a+='<div style="display:inline-block;width:49%;vertical-align: middle;text-align: center;">',"1"==i[r].isClosed?a+="<span>已关闭</span>":(a+='<span replyId="'+i[r].id+'" class="reply" style="border:1px solid #ccc;padding: 5px;border-radius: 5px;margin-right: 20px;">回复</span>',a+='<span replyId="'+i[r].id+'" class="close" style="border:1px solid #ccc;padding: 5px;border-radius: 5px;margin-right: 20px;">关闭</span>'),a+="</div></div>",i[r].reply.length>0){a+='<div style="padding-bottom: 20px;">';for(var n=0;n<i[r].reply.length;n++)a+='<table class="inp_table" cellpadding="0" cellspacing="0" style="margin-left: 5px;background: #ededed;width:97%;border-bottom: 1px solid #ccc;">',a+=' <tr style="background: #ededed;"><td style="padding: 1em;color:#3977E6">回复人：'+i[r].reply[n].replyName+'</td><td style="text-align:center;">'+i[r].reply[n].createTime+"</td></tr>",a+='<tr style="background: #ededed;"><td colspan="2" style="padding: 1em;color:#555">'+i[r].reply[n].replyContent+"</td></tr></table>";a+="</div>"}a+="</div>",a+='<div style="height:18px;background-color:#ededed;"></div>'}$("#deply_html").html(a)}else $("#deply_html").html("")}else e&&e(!0),toast(t.message)},"")}function l(e){var t=$("#reply_edit_problem").val(),i="";i+=toJson("superviseid",window.replyId)+"&",i+=toJson("userid",window.localStorage.userId)+"&",i+=toJson("username",window.localStorage.userName)+"&",i+=toJson("replycontent",t)+"&",i+=toJson("isClosed","0"),doPost("findSuperviseReply.action",i,function(e){"0"==e.code&&($("#replyblackBg").hide(),$("#replysupervisDiv").hide(),toast(e.message),n(!1,1))},"")}function o(){$(".KpiTcbackG").remove();$("#reply_page").append($('<div id="peopleKpiTcbackG" class="KpiTcbackG" style="display:none;"><div class="Tipscontent"><p>督办人</p><form style="padding:3% 5%;"><div class="checkboxList"></div><div class="tc mt5"><span class="KpiFormBut">确定</span></div></form></div></div>')),$.ajax({type:"POST",url:window.imgUrl+"jsp/issuestask/findUsersByType.action",timeout:6e4,data:{},dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(e){if(hideLoading(),!isNull(e)&&e.length>0){for(var t=e,i=1;i<t.length;i++){var a;window.doUsersArr=[],a=$('<div style="padding:1.5% 0;display:inline-block;width:50%;vertical-align:middle;"><input type="checkbox" value="" class="webkit-appearance disI vm"><span class="disI vm f14" style="margin-left:3%;">'+t[i].text+"</span> </div>"),a.data("lidata",t[i]),a.listen("quickClick",function(e){var t=$(e.currentTarget).find("input").is(":checked"),i=$(e.currentTarget).data("lidata");if(t){$(e.currentTarget).find("input").attr("checked",!1);for(var a=-1,r=0;r<window.doUsersArr.length;r++)if(i.id==window.doUsersArr[r].id){a=r;break}-1!=a&&window.doUsersArr.splice(a,1)}else if($(e.currentTarget).find("input").attr("checked",!0),window.doUsersArr.length>0){for(var n=null,r=0;r<window.doUsersArr.length;r++)if(i.id==window.doUsersArr[r].id){n=!0;break}n||window.doUsersArr.push(i)}else window.doUsersArr.push(i)}),$("#reply_page").find(".checkboxList").append(a)}$("#reply_page").find(".KpiFormBut").listen("quickClick",function(e){var t="",i="";if(window.doUsersArr.length>0)for(var a=0;a<window.doUsersArr.length;a++)a==window.doUsersArr.length-1?(t+=window.doUsersArr[a].text,i+=window.doUsersArr[a].id):(t+=window.doUsersArr[a].text+",",i+=window.doUsersArr[a].id+",");$("#reply_page").find("#peopleKpiTcbackG").hide(),$("#peopleselect_edit").val(t),window.localStorage.currhandlernameCodes=i}),$("#reply_page").find("#peopleKpiTcbackG").show()}else toast(e.message)},error:function(e){hideLoading(),toast("请检查网络")}})}var d=this;$(".deptrecordVoice").on({touchstart:function(t){e()},touchmove:function(){},touchend:function(){t()}}),$("#reply_list_wrapper")[0].style.height=window.localInnerHeight-$("#reply_page .page_header").height()+"px",window.searchPage=2,initScroll({wrapper:"reply_list_wrapper",dir:"y",bounce:!1,scrollBar:!0,pullUpLoading:function(e){window.searchPage>window.arrayDataLength?(e(!0),toast("没有更多的数据了")):n(e,window.searchPage++)},pullDownLoading:function(e){window.searchPage=2,n(e,1)}}),function(){r(),n(!1,1),$("#reply_page").data("mediaRec",null)}(),function(){$(".recordStart").show(),$(".recordFinish").hide(),$("#reply_page").data("mediaRec",null),$("#reply_page").data("rememberTimer",null),$("#deply_html").on("click",".reply",function(e){window.replyId=$(e.currentTarget).attr("replyId"),$("#reply_edit_problem").val(""),$("#reply_case_words").val("0/500"),$("#replyblackBg").show(),$("#replysupervisDiv").show()}),$("#deply_html").on("click",".close",function(e){var t="";window.replyId=$(e.currentTarget).attr("replyId"),t+=toJson("superviseid",window.replyId)+"&",t+=toJson("isClosed","1"),doPost("findSuperviseReply.action",t,function(e){"0"==e.code&&(toast(e.message),n(!1,1))},"")}),$("#reply_page #configbackhandlername_editreply").listen("quickClick",function(e){l()}),$("#reply_page #peopleselect_tr").listen("quickClick",function(e){o()}),$("#reply_page #replyblackBg").listen("quickClick",function(e){$("#replyblackBg").hide(),$("#replysupervisDiv").hide()}),$("#enterBtn").listen("quickClick",function(e){i()}),$("#save_implement_edit").listen("quickClick",function(e){isNull($("#projectname_edit").val())?toast("请输入项目名称"):isNull($("#handlername_edit").val())?toast("请输入督察人姓名"):isNull($("#supervisesuggestion_problem").val())?toast("请输入督办意见"):showContentAlert("确认保存本次提交吗？",function(){},function(){saveImplementEdit()},"确定")}),$("#reply_page .back-button").listen("quickClick",function(e){"detail"==window.detailFlag?d.$router.push({path:"/implementProjectDetail"}):"other"==window.detailFlag?d.$router.push({path:"/otherProjectDetail"}):"reserve"==window.detailFlag?d.$router.push({path:"/projectReserveDetail"}):"rank"==window.detailFlag?d.$router.push({path:"/rankingDetail"}):"supervise"==window.detailFlag&&d.$router.push({path:"/superviseDetail"})}),$("#reply_page #handlername_edit").listen("quickClick",function(e){app_handlername()}),chooseDate("appEnfor_end_time","datetime"),$("#reply_page #appEnforchoice").click(function(e){window.upload_imgscroll="appEnfor_edit_img_scroll",window.upload_imgwrapper="appEnfor_edit_img_wrapper",window.upload_addimg="appEnfor_edit_img",getPhotograph()}),$(".deptrecordPlay").click(function(){window.flag||(window.flag=!0,mediaRecObj=new Media(window.wjpwDataDirFileSystem.nativeURL+"/myrecording.mp3",function(){console.log("Media_succ")},function(){console.log("Media_fail")}),$("#reply_page").data("mediaRec",mediaRecObj)),mediaRecObj.play()}),$(".deptrecordDel").click(function(){window.flag1||(window.flag1=!0,mediaRecObj=new Media(window.wjpwDataDirFileSystem.nativeURL+"/myrecording.mp3",function(){console.log("Media_succ")},function(){console.log("Media_fail")}),$("#reply_page").data("mediaRec",mediaRecObj)),mediaRecObj.release(),window.flag=!1,window.flag1=!1,$("#reply_page").data("mediaRec",null),$(".recordStart").show(),$(".recordFinish").hide()})}()}}},1670:function(e,t){},2246:function(e,t,i){"use strict";var a=i(2247);i.d(t,"a",function(){return a.a}),i.d(t,"b",function(){return a.b})},2247:function(e,t,i){"use strict";i.d(t,"a",function(){return a}),i.d(t,"b",function(){return r});var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{"data-role":"page",id:"reply_page"}},[i("tk-header",[e._v("\n        督察督办\n        "),i("span",{attrs:{slot:"right"},on:{click:function(t){return e.$router.push("implementProjectEdit.vue")}},slot:"right"},[e._v("新增")])]),e._v(" "),e._m(0),e._v(" "),i("div",{staticClass:"KpiTcbackG",staticStyle:{display:"none",background:"#000",opacity:"0.7"},attrs:{id:"replyblackBg"}}),e._v(" "),e._m(1)],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page_content"},[i("div",{staticClass:"jszx-wrapper",staticStyle:{background:"#fff"},attrs:{id:"reply_list_wrapper"}},[i("div",{staticClass:"jszx-scroller"},[i("div",{staticClass:"html_margin white_background",attrs:{id:"deply_html"}})])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"KpiFooterContent2",staticStyle:{display:"none"},attrs:{id:"replysupervisDiv"}},[i("p",{staticClass:"KpiNameTitle"}),e._v(" "),i("table",{staticClass:"inp_table",attrs:{cellpadding:"0",cellspacing:"0"}},[i("tr",[i("td",{staticStyle:{padding:"1em"}},[e._v("督办回复")]),e._v(" "),i("td",{staticStyle:{"text-align":"right"}},[i("span",{staticStyle:{color:"#3977E6"},attrs:{id:"configbackhandlername_editreply"}},[e._v("发表")])])]),e._v(" "),i("tr",[i("td",{staticStyle:{padding:"0"},attrs:{colspan:"2"}},[i("textarea",{staticStyle:{"text-align":"left","min-height":"5em",padding:"0em 0.5em 0em 1em"},attrs:{onfocus:"newCheckWord('reply_edit_problem',500,'reply_case_words')",onKeyUp:"javascript:newCheckWord('reply_edit_problem',500,'reply_case_words');",onMouseDown:"javascript:newCheckWord('reply_edit_problem',500,'reply_case_words');",placeholder:"请输入你的回复内容",id:"reply_edit_problem"}}),e._v(" "),i("input",{staticClass:"small gray_dark_font",staticStyle:{color:"#999999",width:"58%"},attrs:{readonly:"true",id:"reply_case_words"}})])])])])}]},2248:function(e,t,i){"use strict";var a=i(1670),r=i.n(a);r.a},539:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(2246),r=i(1668);for(var n in r)"default"!==n&&function(e){i.d(t,e,function(){return r[e]})}(n);var l=(i(2248),i(0)),o=Object(l.a)(r.default,a.a,a.b,!1,null,"9932c878",null);t.default=o.exports}});