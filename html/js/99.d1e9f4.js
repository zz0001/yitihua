webpackJsonp([99],{1695:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=i(1696),a=i.n(d);for(var r in d)"default"!==r&&function(e){i.d(t,e,function(){return d[e]})}(r);t.default=a.a},1696:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=i(52),a=function(e){return e&&e.__esModule?e:{default:e}}(d);t.default={name:"ldzbEdit",mounted:function(){function e(t,i){console.log("图片张数："+window.picture_array.length+"；当前第"+i+"张");var a="";a+=toJson("base64Str",t),doPost("app_publicOpinion_upPic.action",a,function(t){if(0==t.code){if(i<parseInt(window.picture_array.length)){console.log("当前上传第:"+i+"张,下次上传第"+i+"张");var a=parseInt(i)+1;e(window.picture_array[i],a)}else console.log("图片上传结束");isNull(window.picture_upImg)?window.picture_upImg=t.datas.path:window.picture_upImg=window.picture_upImg+";"+t.datas.path,console.log("当前type"+i+"；总共张数："+window.picture_array.length),parseInt(i)==window.picture_array.length?(d("",$("#ldzb_edit_problem").val(),$("#ldzb_edit_endTime").val(),getNowTime(),window.doDeptArr),console.log("type和图片长度相等"+i)):console.log("type和图片长度不相等")}else toast(t.message)},"","")}function t(){$("#ldzb_edit_page table tr td").addClass("gray_line_bottom"),$("#ldzb_edit_page table tr td input").val(""),$("#ldzb_edit_page table tr td textarea").val(""),window.picture_array=[],window.picture_upImg="",window.orginId="",window.choiceThingsParts="",initMapInfo("#ldzb_edit_address"),window.choiceThingsParts="",window.choiceBigType="",window.choiceSmallType="",window.choiceOneGridId="",$("#ldzb_edit_img_scroll").css("transform","none"),$("#ldzb_edit_img_wrapper .scroll-bar-x").css("transform","none"),$("#ldzb_words").val("0/500"),$("#ldzb_edit_page #ldzb_edit_img").empty(),$("#ldzb_edit_page #ldzb_edit_img").append('<img class="goodsimgone" style="" src="/staitc/resources/images/icon_add_photo.png" id="choicemore">')}function i(e,t){$(".KpiTcbackG").remove();$("#ldzb_edit_page").append($('<div class="KpiTcbackG" style="display:none;"><div class="Tipscontent"><p>处理部门</p><ul id="hear"><li class="action"><a href="#fragment-1"><span>村、社区</span></a></li><li><a href="#fragment-2"><span>职能部门</span></a></li><li><a href="#fragment-3"><span>专业公司</span></a></li> </ul><div id="fragment-1" style="display: block;" class="checkboxList"></div><div id="fragment-2" class="checkboxList2"></div><div id="fragment-3" class="checkboxList3"></div><div class="tc mt5"><span class="KpiFormBut">确定</span></div></div></div>')),$("#hear li").eq(0).listen("quickClick",function(e){$("#hear li").removeClass("action"),$("#hear li").eq(0).addClass("action"),$("#fragment-2").hide(),$("#fragment-3").hide(),$("#fragment-1").show()}),$("#hear li").eq(1).listen("quickClick",function(e){$("#hear li").removeClass("action"),$("#hear li").eq(1).addClass("action"),$("#fragment-1").hide(),$("#fragment-3").hide(),$("#fragment-2").show()}),$("#hear li").eq(2).listen("quickClick",function(e){$("#hear li").removeClass("action"),$("#hear li").eq(2).addClass("action"),$("#fragment-1").hide(),$("#fragment-2").hide(),$("#fragment-3").show()}),doPost("chooseDepartment.action","",function(e){if(!isNull(e)&&e.length>0){for(var t=e,i=0;i<t.length;i++){var d,r,n;window.doDeptArr=[],"01"==t[i].deptTypeCode?(d=$('<div style="padding:1.5% 0;display:inline-block;width:50%;vertical-align:middle;"><input type="checkbox" value="" class="webkit-appearance disI vm"><span class="disI vm f14" style="margin-left:3%;">'+t[i].deptName+"</span> </div>"),d.data("lidata",t[i]),d.listen("quickClick",function(e){var t=$(e.currentTarget).find("input").is(":checked"),i=$(e.currentTarget).data("lidata");if(t){$(e.currentTarget).find("input").attr("checked",!1);for(var d=-1,r=0;r<window.doDeptArr.length;r++)if(i.deptCode==window.doDeptArr[r].deptCode){d=r;break}-1!=d&&window.doDeptArr.splice(d,1)}else if($(e.currentTarget).find("input").attr("checked",!0),window.doDeptArr.length>0){for(var n=null,r=0;r<window.doDeptArr.length;r++)if(i.deptCode==window.doDeptArr[r].deptCode){n=!0;break}n||window.doDeptArr.push(i)}else window.doDeptArr.push(i);console.error("window.doDeptArr:"+(0,a.default)(window.doDeptArr))})):"02"==t[i].deptTypeCode?(r=$('<div style="padding:1.5% 0;display:inline-block;width:50%;vertical-align:middle;"><input type="checkbox" value="" class="webkit-appearance disI vm"><span class="disI vm f14" style="margin-left:3%;">'+t[i].deptName+"</span> </div>"),r.data("lidata1",t[i]),r.listen("quickClick",function(e){var t=$(e.currentTarget).find("input").is(":checked"),i=$(e.currentTarget).data("lidata1");if(t){$(e.currentTarget).find("input").attr("checked",!1);for(var d=-1,r=0;r<window.doDeptArr.length;r++)if(i.deptCode==window.doDeptArr[r].deptCode){d=r;break}-1!=d&&window.doDeptArr.splice(d,1)}else if($(e.currentTarget).find("input").attr("checked",!0),window.doDeptArr.length>0){for(var n=null,r=0;r<window.doDeptArr.length;r++)if(i.deptCode==window.doDeptArr[r].deptCode){n=!0;break}n||window.doDeptArr.push(i)}else window.doDeptArr.push(i);console.error("window.doDeptArr:"+(0,a.default)(window.doDeptArr))})):"03"==t[i].deptTypeCode&&(n=$('<div style="padding:1.5% 0;display:inline-block;width:50%;vertical-align:middle;"><input type="checkbox" value="" class="webkit-appearance disI vm"><span class="disI vm f14" style="margin-left:3%;">'+t[i].deptName+"</span> </div>"),n.data("lidata2",t[i]),n.listen("quickClick",function(e){var t=$(e.currentTarget).find("input").is(":checked"),i=$(e.currentTarget).data("lidata2");if(t){$(e.currentTarget).find("input").attr("checked",!1);for(var d=-1,r=0;r<window.doDeptArr.length;r++)if(i.deptCode==window.doDeptArr[r].deptCode){d=r;break}-1!=d&&window.doDeptArr.splice(d,1)}else if($(e.currentTarget).find("input").attr("checked",!0),window.doDeptArr.length>0){for(var n=null,r=0;r<window.doDeptArr.length;r++)if(i.deptCode==window.doDeptArr[r].deptCode){n=!0;break}n||window.doDeptArr.push(i)}else window.doDeptArr.push(i);console.error("window.doDeptArr:"+(0,a.default)(window.doDeptArr))})),$("#ldzb_edit_page").find(".checkboxList").append(d),$("#ldzb_edit_page").find(".checkboxList2").append(r),$("#ldzb_edit_page").find(".checkboxList3").append(n)}$("#ldzb_edit_page").find(".KpiFormBut").listen("quickClick",function(e){var t="";if(window.doDeptArr.length>0)for(var i=0;i<window.doDeptArr.length;i++)i==window.doDeptArr.length-1?t+=window.doDeptArr[i].deptName:t+=window.doDeptArr[i].deptName+",";$("#ldzb_edit_page").find(".KpiTcbackG").hide(),$("#case_doDept").val(t)}),$("#ldzb_edit_page").find(".KpiTcbackG").show()}else toast(e.message)},"","")}function d(e,t,i,d,r){console.error("zhangsan::"+(0,a.default)(window.doDeptArr)),console.error("zhangsan::"),console.log("上传的图片信息："+window.picture_upImg+"经纬度："+window.choiceLongitude+","+window.choiceLatitude);var o=$("#ldzb_edit_address").text(),l="";l+=toJson("origin","1")+"&",l+=toJson("loginId",window.localStorage.loginId)+"&",l+=toJson("problem",$.trim(t))+"&",l+=toJson("reportPics",window.picture_upImg)+"&",l+=toJson("longitude",$.trim(window.choiceLongitude))+"&",l+=toJson("latitude",$.trim(window.choiceLatitude))+"&",l+=toJson("location",$.trim(o)),doPost("dsb.action",l,function(e){window.leadercommitFlag=0,$("#save_returnAddress_leader").removeClass("gray_gray_background"),$("#save_returnAddress_leader").addClass("orange_background"),0==e.code?(toast(e.message),cleadCaseEdit(),n.$router.push({path:"welcome",query:{}})):toast(e.message)},"","")}function r(e){return!/\s/.test(e)}window.searchPage=2;var n=this;!function(){$("#ldzb_edit_wrapper")[0].style.height=window.localInnerHeight-$("#ldzb_edit_page .page_header").height()-$("#ldzb_edit_page .page_footer").height()+"px",initScroll({wrapper:"ldzb_edit_wrapper",dir:"y",bounce:!1,scrollBar:!0}),scrollToTop("ldzb_edit_wrapper"),t(),window.leadercommitFlag=0}(),$(".page_content")[0].style.height=window.localInnerHeight-$(".tk-header").height()-$(".page_footer").height()+"px",$(".page_content").children("div").get(0).style.height=window.localInnerHeight-$(".page_header").height()-$(".page_footer").height()+"px",$("input").addClass("small gray_dark_font ui-input-text ui-body-c ui-corner-all ui-shadow-inset"),$("textarea").addClass("ui-input-text ui-body-c ui-corner-all ui-shadow-inset"),$("#ldzb_edit_page .back-button").listen("quickClick",function(e){n.$router.push({path:"welcome",query:{}})}),$("#ldzb_edit_page #ldzb_edit_address_img").listen("quickClick",function(e){showMapAlert("请选择位置","确定","",function(){$("#ldzb_edit_address").html($("#map_html_address").html()),$(".mapshowalert").remove()})}),$("#ldzb_edit_page #choicemore").click(function(e){window.upload_imgscroll="ldzb_edit_img_scroll",window.upload_imgwrapper="ldzb_edit_img_wrapper",window.upload_addimg="ldzb_edit_img",getPhotograph()}),chooseDate("ldzb_edit_endTime","datetime"),$("#ldzb_edit_page #case_doDept").listen("quickClick",function(e){i()}),$("#ldzb_edit_page .page_footer").listen("quickClick",function(t){var i=r($("#ldzb_edit_problem").val());window.leadercommitFlag||(isNull($("#ldzb_edit_problem").val())||0==i?0==i?toast("问题描述请不要输入空格"):toast("请输入问题描述"):showContentAlert("确认保存本次提交吗？",function(){},function(){window.leadercommitFlag=1,$("#save_returnAddress_leader").removeClass("orange_background"),$("#save_returnAddress_leader").addClass("gray_gray_background"),!isNull(window.picture_array)||window.picture_array.length>0?(window.picture_upImg="",e(window.picture_array[0],1)):d("",$("#ldzb_edit_problem").val())},"确定"))})}}},1697:function(e,t){},2273:function(e,t,i){"use strict";var d=i(2274);i.d(t,"a",function(){return d.a}),i.d(t,"b",function(){return d.b})},2274:function(e,t,i){"use strict";i.d(t,"a",function(){return d}),i.d(t,"b",function(){return a});var d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{"data-role":"page",id:"ldzb_edit_page"}},[i("tk-header",[e._v("\n        领导直报\n    ")]),e._v(" "),e._m(0),e._v(" "),e._m(1)],1)},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page_content"},[i("div",{staticClass:"jszx-wrapper",attrs:{id:"ldzb_edit_wrapper"}},[i("div",{staticClass:"jszx-scroller"},[i("div",{staticClass:"html_margin white_background"},[i("table",{staticClass:"inp_table",attrs:{cellpadding:"0",cellspacing:"0"}},[i("tr",[i("td",[e._v("上传图片")]),e._v(" "),i("td",{attrs:{colspan:"2"}},[i("input",{staticClass:"small",attrs:{id:"good_num",value:"0/5",readonly:"",type:"text"}})])]),e._v(" "),i("tr",[i("td",{staticClass:"commodityAddImgs",attrs:{colspan:"3"}},[i("div",{staticClass:"jszx-wrapper",attrs:{id:"ldzb_edit_img_wrapper"}},[i("div",{staticClass:"jszx-scroller",attrs:{id:"ldzb_edit_img_scroll"}},[i("div",{attrs:{id:"ldzb_edit_img"}})])])])]),e._v(" "),i("tr",{attrs:{id:"ldzb_location_tr"}},[i("td",{staticStyle:{"min-width":"5em"}},[e._v("位置描述"),i("span",[e._v("*")])]),e._v(" "),i("td",{staticStyle:{padding:"1em 0.5em 1em 0em","line-height":"1.4em","text-align":"right"}},[i("div",{attrs:{contenteditable:"true",id:"ldzb_edit_address"}})]),e._v(" "),i("td",{staticStyle:{width:"1%"},attrs:{id:"ldzb_edit_address_img"}},[i("img",{staticClass:"div_input_value_img",attrs:{src:"/staitc/resources/images/icon_dz.png"}})])]),e._v(" "),i("tr",[i("td",{staticStyle:{"padding-top":"0.5em"}},[e._v("问题描述"),i("span",[e._v("*")])]),e._v(" "),i("td",{attrs:{colspan:"2"}},[i("input",{staticClass:"small gray_dark_font",staticStyle:{color:"#999999"},attrs:{readonly:"true",id:"case_words"}})])]),e._v(" "),i("tr",[i("td",{attrs:{colspan:"3"}},[i("textarea",{staticStyle:{"text-align":"left","min-height":"5em",padding:"0em 0.5em 0em 1em"},attrs:{onfocus:"newCheckWord('ldzb_edit_problem',500,'case_words')",onKeyUp:"javascript:newCheckWord('ldzb_edit_problem',500,'case_words');",onMouseDown:"javascript:newCheckWord('ldzb_edit_problem',500,'case_words');",placeholder:"请输入问题描述",id:"ldzb_edit_problem"}})])])])])])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page_footer"},[i("div",{staticClass:"footer_button_div"},[i("div",{staticClass:"alert_bottom_three orange_background",attrs:{id:"save_returnAddress_leader"}},[e._v("保存")])])])}]},2275:function(e,t,i){"use strict";var d=i(1697),a=i.n(d);a.a},548:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=i(2273),a=i(1695);for(var r in a)"default"!==r&&function(e){i.d(t,e,function(){return a[e]})}(r);var n=(i(2275),i(0)),o=Object(n.a)(a.default,d.a,d.b,!1,null,null,null);t.default=o.exports}});