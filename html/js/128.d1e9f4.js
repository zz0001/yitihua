webpackJsonp([128],{1599:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(1600),a=i.n(o);for(var r in o)"default"!==r&&function(e){i.d(t,e,function(){return o[e]})}(r);t.default=a.a},1600:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"",data:function(){return{isReport:!0,iszxcz:!0,imagesReport:[],imageszxcz:[]}},watch:{isReport:function(e){1==e?($("#imgtitle_tr").show(),$("#img_tr").show(),$("#questiontitle_tr").show(),$("#question_tr").show(),window.area="1"):($("#imgtitle_tr").hide(),$("#img_tr").hide(),$("#questiontitle_tr").hide(),$("#question_tr").hide(),window.area="0")},iszxcz:function(e){1==e?($("#cl_table").show(),$("#cl_img_tr").show(),window.disposeselect="1"):($("#cl_table").hide(),$("#cl_img_tr").hide(),window.disposeselect="0")}},mounted:function(){function e(e){return!/\s/.test(e)}function t(){window.picture_upImg="",window.picture_upImg2="",$("#firstdmmc").text(window.firstdmmc),$("#seconddmmc").text(window.seconddmmc),$("#xxcj_edit_address").text(window.localStorage.mapAddress),$("#xxcj_edit_problem").val(""),$("#imgtitle_tr").show(),$("#img_tr").show(),$("#questiontitle_tr").show(),$("#question_tr").show(),$("#good_num").val("0/5"),$("#xxcj_words").val("0/500"),$("#cl_xxcj_edit_problem").val(""),$('input[type=radio][name="xxcj"]:checked').prop("checked",!1),$("#has").prop("checked",!0),window.disposeselect="1","1"==window.dispose?$("#selsetdispose_div").show():$("#selsetdispose_div").hide(),$("#cl_good_num").val("0/5"),$("#cl_xxcj_words").val("0/500"),$('input[type=radio][name="zxcl"]:checked').prop("checked",!1),$("#yeszxcl").prop("checked",!0),$("#save_returnAddress").removeClass("gray_gray_background"),$("#save_returnAddress").addClass("orange_background")}function i(){console.log("上传的图片信息："+window.picture_upImg+"经纬度："+window.choiceLongitude+","+window.choiceLatitude);var e=$("#xxcj_edit_address").text(),t=$("#xxcj_edit_problem").val(),i="1",o="1";0==c.isReport&&(i="0"),0==c.iszxcz&&(o="0");var a=$("#cl_xxcj_edit_problem").val(),r="";r+=toJson("origin","4")+"&",r+=toJson("loginId",$.trim(window.localStorage.loginId))+"&",r+=toJson("eventComponent",$.trim(window.eventComponent))+"&",r+=toJson("bigClass",$.trim(window.bigClass))+"&",r+=toJson("location",$.trim(e))+"&",r+=toJson("problem",$.trim(t))+"&",r+=toJson("reportPics",window.picture_upImg)+"&",r+=toJson("longitude",$.trim(window.choiceLongitude))+"&",r+=toJson("latitude",$.trim(window.choiceLatitude))+"&",r+=toJson("questionStatus",$.trim(i))+"&",r+=toJson("score",$.trim(window.score))+"&",r+=toJson("dispose",$.trim(o))+"&",r+=toJson("backPath",$.trim(window.picture_upImg2))+"&",r+=toJson("disposeResult",$.trim(a)),doPost("MobileCaseReport.action",r,function(e){window.commitFlag=0,$("#save_returnAddress").removeClass("gray_gray_background"),$("#save_returnAddress").addClass("orange_background"),0==e.code?(hideLoading(),toast(e.message),window.currstep="1",c.$router.push({path:"xxcjList",query:{}})):(hideLoading(),toast(e.message))},"","")}function o(e,t,a){var r="";r+=toJson("base64Str",e),doPost("appWorkOrder_upLoadPic.action",r,function(e){if(0==e.code){if(console.log("1111111111111111当前上传第:"+t+"张,下次上传第"+t+"张"),t<parseInt(window.picture_array.length)){console.log("当前上传第:"+t+"张,下次上传第"+t+"张");var r=parseInt(t)+1;o(window.picture_array[t],r,a)}else console.log("图片上传结束");isNull(window.picture_upImg)?window.picture_upImg=e.data:window.picture_upImg=window.picture_upImg+";"+e.data,console.log("图片数据："+window.picture_upImg),parseInt(t)==window.picture_array.length&&isNull(a)&&("1"==window.disposeselect?isNull(window.picture_array2)?toast("处理图片不能为空"):d(window.picture_array2[0],1):i())}else toast(e.message)},"","")}function a(){var e=$('<div class="max-dialog"><div class="max-dialog-masker"></div><div style="position:absolute;width:100%;bottom:0;text-align:center;background:#fff;"><div style="padding:15px;border-bottom:solid 1px #eee;" class="btn1">拍照</div><div style="padding:15px;" class="btn2">相册</div></div></div>').appendTo(".ui-page-active");e.find(".max-dialog-masker").click(function(){e.remove()}),e.find(".btn1").click(function(){navigator.camera.getPicture(r,userPicFail,{}),e.remove()}),e.find(".btn2").click(function(){navigator.camera.getPicture(r,userPicFail,{sourceType:Camera.PictureSourceType.PHOTOLIBRARY}),e.remove()})}function r(e){console.log("开始调用方法："+e),compressImage(e,300,function(e){if(console.log("获取到了图片"),!isNull(window.picture_array2)&&window.picture_array2.length>0){var t=window.picture_array2.length;window.picture_array2[t]=e;var i=' <div class="imgdiv">';i+='<img class="delimg" src="/staitc/resources/images/del3.png">',i+='<img class="goodsimgone" src="'+e+'">',i+="</div>",imgWidth(window.upload_imgscroll,window.upload_imgwrapper,window.picture_array2.length,window.upload_addimg),$("#cl_good_num").val(window.picture_array2.length+"/5");var o=createListRow(i).appendTo("#"+window.upload_addimg),r="";if(window.picture_array2.length>4)$("#"+window.upload_addimg+" #cl_choicemore").remove();else{var d='<img class="goodsimgone" style="padding-top:2em;padding-left:1.5em;" src="/staitc/resources/images/icon_add_photo.png" id="cl_choicemore">';$("#"+window.upload_addimg+" #cl_choicemore").remove(),r=createListRow(d).appendTo("#"+window.upload_addimg),r.click(function(e){a()})}o.data("data",window.picture_array2[t]),o.listen("quickClick",function(e){var t=$(e.currentTarget).data("data");$(e.currentTarget).hide();$("#"+window.upload_addimg+" #cl_choicemore").remove(),createListRow('<img class="goodsimgone" style="margin-left:1.5em;padding-top:2em;" src="/staitc/resources/images/icon_add_photo.png" id="cl_choicemore">').appendTo("#"+window.upload_addimg).click(function(e){a()}),imgWidth(window.upload_imgscroll,window.upload_imgwrapper,window.picture_array2.length,window.upload_addimg);for(var i=0;i<window.picture_array2.length;i++)if(window.picture_array2[i]==t){$("#cl_good_num").val(window.picture_array2.length-1+"/5"),window.picture_array2.splice(i,1),$(".max-confirm2").remove();break}})}else{$("#"+window.upload_addimg).empty(),console.log("第一张图片"),window.picture_array2=new Array,window.picture_array2[0]=e;var i="";i+=' <div class="imgdiv">',i+='     <img class="delimg" src="/staitc/resources/images/del3.png">',i+='     <img class="goodsimgone" src="'+e+'">',i+=" </div>",imgWidth(window.upload_imgscroll,window.upload_imgwrapper,window.picture_array2.length,window.upload_addimg);var c=createListRow(i).appendTo("#"+window.upload_addimg);$("#cl_good_num").val(window.picture_array2.length+"/5");var r="";if(window.picture_array2.length<4){var d='<img class="goodsimgone" style="padding-top:2em;margin-left:1.5em;" src="/staitc/resources/images/icon_add_photo.png" id="cl_choicemore">';$("#"+window.upload_addimg+" #cl_choicemore").remove(),r=createListRow(d).appendTo("#"+window.upload_addimg),r.click(function(e){a()})}c.data("data",window.picture_array2[0]),c.listen("quickClick",function(e){var t=$(e.currentTarget).data("data");$(e.currentTarget).hide();$("#"+window.upload_addimg+" #cl_choicemore").remove(),createListRow('<img class="goodsimgone" style="padding-top:2em;padding-left:1.5em;" src="/staitc/resources/images/icon_add_photo.png" id="cl_choicemore">').appendTo("#"+window.upload_addimg).click(function(e){a()});for(var i=0;i<window.picture_array2.length;i++)if(window.picture_array2[i]==t){window.picture_array2.splice(i,1),$("#cl_good_num").val(window.picture_array2.length+"/5"),$(".max-confirm2").remove();break}})}}),console.log("图片："+window.picture_array2)}function d(e,t,o){var a="";a+=toJson("base64Str",e),doPost("appWorkOrder_upLoadPic.action",a,function(e){if(0==e.code){if(console.log("1111111111111111当前上传第:"+t+"张,下次上传第"+t+"张"),t<parseInt(window.picture_array2.length)){console.log("当前上传第:"+t+"张,下次上传第"+t+"张");var a=parseInt(t)+1;d(window.picture_array2[t],a,o)}else console.log("图片上传结束");isNull(window.picture_upImg2)?window.picture_upImg2=e.data:window.picture_upImg2=window.picture_upImg2+";"+e.data,parseInt(t)==window.picture_array2.length&&isNull(o)&&i()}else toast(e.message)},"","")}var c=this;window.searchPage=2,$(".page_content")[0].style.height=window.localInnerHeight-$(".page_header").height()-$(".page_footer").height()+"px",$(".page_content").children("div").get(0).style.height=window.localInnerHeight-$(".page_header").height()-$(".page_footer").height()+"px",$("input").addClass("small gray_dark_font ui-input-text ui-body-c ui-corner-all ui-shadow-inset"),$("textarea").addClass("ui-input-text ui-body-c ui-corner-all ui-shadow-inset"),function(){$("#xxcj_edit_wrapper")[0].style.height=window.localInnerHeight-$("#xxcj_edit_page .page_header").height()-$("#xxcj_edit_page .page_footer").height()+"px",initScroll({wrapper:"xxcj_edit_wrapper",dir:"y",bounce:!1,scrollBar:!0}),scrollToTop("xxcj_edit_wrapper"),window.picture_array=[],window.picture_array2=[],$("#xxcj_edit_img_scroll").css("transform","none"),$("#xxcjk_edit_img_wrapper .scroll-bar-x").css("transform","none"),$("#xxcj_edit_page #xxcj_edit_img").empty(),$("#xxcj_edit_page #xxcj_edit_img").append('<img class="goodsimgone" style="padding-top:2em;" src="/staitc/resources/images/icon_add_photo.png" id="choicexxcj">'),$("#cl_xxcj_edit_img_scroll").css("transform","none"),$("#cl_xxcj_edit_img_wrapper .scroll-bar-x").css("transform","none"),$("#xxcj_edit_page #cl_xxcj_edit_img").empty(),$("#xxcj_edit_page #cl_xxcj_edit_img").append('<img class="goodsimgone" style="padding-top:2em;" src="/staitc/resources/images/icon_add_photo.png" id="cl_choicemore">'),t()}(),$("#xxcj_edit_page .back-button").listen("quickClick",function(e){c.$router.back()}),$("input[type=radio][name=xxcj]").change(function(){"0"==this.value?($("#imgtitle_tr").hide(),$("#img_tr").hide(),$("#questiontitle_tr").hide(),$("#question_tr").hide(),window.area="0"):"1"==this.value&&($("#imgtitle_tr").show(),$("#img_tr").show(),$("#questiontitle_tr").show(),$("#question_tr").show(),window.area="1")}),$("input[type=radio][name=zxcl]").change(function(){"0"==this.value?($("#cl_table").hide(),window.disposeselect="0"):"1"==this.value&&($("#cl_table").show(),window.disposeselect="1")}),$("#xxcj_edit_page #xxcj_edit_address_img").listen("quickClick",function(e){showMapAlert("请选择位置","确定","",function(){$("#xxcj_edit_address").html($("#map_html_address").html()),$(".mapshowalert").remove()})}),$("#xxcj_edit_page #choicexxcj").click(function(e){window.upload_imgscroll="xxcj_edit_img_scroll",window.upload_imgwrapper="xxcj_edit_img_wrapper",window.upload_addimg="xxcj_edit_img",getPhotograph()}),$("#xxcj_edit_page #cl_choicemore").click(function(e){window.upload_imgscroll="cl_xxcj_edit_img_scroll",window.upload_imgwrapper="cl_xxcj_edit_img_wrapper",window.upload_addimg="cl_xxcj_edit_img",a()}),$("#xxcj_edit_page .page_footer").listen("quickClick",function(t){var a=e($("#xxcj_edit_problem").val()),r=(window.firstdmmc,window.xxcjpath);window.area;window.picture_array=c.imagesReport,window.picture_array2=c.imageszxcz,isNull($("#xxcj_edit_address").text())?toast("位置不能为空"):isNull(window.picture_array)&&1==c.isReport&&"1"==r?toast("上报图片不能为空"):!isNull($("#xxcj_edit_problem").val())&&0!=a||1!=c.isReport?isNull(window.picture_array2)&&"1"==window.disposeselect?toast("处理图片不能为空"):showContentAlert("确认保存本次提交吗？",function(){},function(){window.commitFlag=1,$("#save_returnAddress").removeClass("orange_background"),$("#save_returnAddress").addClass("gray_gray_background"),!isNull(window.picture_array)||window.picture_array.length>0?(showLoading("上传中","","","/staitc/resources/images/loading.gif"),window.picture_upImg="",o(window.picture_array[0],1)):i()},"确定"):0==a?toast("问题描述请不要输入空格"):toast("请输入问题描述")})}}},1601:function(e,t){},2177:function(e,t,i){"use strict";var o=i(2178);i.d(t,"a",function(){return o.a}),i.d(t,"b",function(){return o.b})},2178:function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return a});var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{"data-role":"page",id:"xxcj_edit_page"}},[i("tk-header",[e._v("\n        巡查上报\n    ")]),e._v(" "),i("div",{staticClass:"page_content"},[i("div",{staticClass:"jszx-wrapper",attrs:{id:"xxcj_edit_wrapper"}},[i("div",{staticClass:"jszx-scroller"},[i("div",{staticClass:"html_margin white_background"},[e._m(0),e._v(" "),e._m(1),e._v(" "),i("tk-switch",{attrs:{name:"有问题"},model:{value:e.isReport,callback:function(t){e.isReport=t},expression:"isReport"}}),e._v(" "),i("div",{attrs:{id:"imgtitle_tr"}},[i("tk-title",[e._v("上传图片")]),e._v(" "),i("tk-upload-photo",{model:{value:e.imagesReport,callback:function(t){e.imagesReport=t},expression:"imagesReport"}})],1),e._v(" "),e._m(2),e._v(" "),i("div",{attrs:{id:"selsetdispose_div"}},[e._m(3),e._v(" "),i("tk-switch",{attrs:{name:"自行处理"},model:{value:e.iszxcz,callback:function(t){e.iszxcz=t},expression:"iszxcz"}}),e._v(" "),i("div",{attrs:{id:"cl_img_tr"}},[i("tk-title",[e._v("上传处理图片")]),e._v(" "),i("tk-upload-photo",{model:{value:e.imageszxcz,callback:function(t){e.imageszxcz=t},expression:"imageszxcz"}})],1),e._v(" "),e._m(4)],1)],1)])])]),e._v(" "),e._m(5)],1)},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"firrstTitle"},[i("p",[i("span"),i("span",{attrs:{id:"firstdmmc"}})])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"secondTitle"},[i("span",{attrs:{id:"seconddmmc"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("table",{staticClass:"inp_table",attrs:{cellpadding:"0",cellspacing:"0"}},[i("tr",{attrs:{id:"location_tr"}},[i("td",{staticStyle:{"min-width":"5em"}},[e._v("位置描述"),i("span",[e._v("*")])]),e._v(" "),i("td",{staticStyle:{padding:"1em 0.5em 1em 0em","line-height":"1.4em","text-align":"right"}},[i("div",{attrs:{contenteditable:"true",id:"xxcj_edit_address"}})]),e._v(" "),i("td",{staticStyle:{width:"1%"},attrs:{id:"xxcj_edit_address_img"}},[i("img",{staticClass:"div_input_value_img",attrs:{src:"/staitc/resources/images/icon_dz.png"}})])]),e._v(" "),i("tr",{attrs:{id:"questiontitle_tr"}},[i("td",{staticStyle:{"padding-top":"0.5em"}},[e._v("问题描述"),i("span",[e._v("*")])]),e._v(" "),i("td",{attrs:{colspan:"2"}},[i("input",{staticClass:"small gray_dark_font",staticStyle:{color:"#999999"},attrs:{readonly:"true",id:"xxcj_words"}})])]),e._v(" "),i("tr",{attrs:{id:"question_tr"}},[i("td",{attrs:{colspan:"3"}},[i("textarea",{staticStyle:{"text-align":"left","min-height":"5em",padding:"0em 0.5em 0em 1em"},attrs:{onfocus:"newCheckWord('xxcj_edit_problem',500,'xxcj_words')",onKeyUp:"javascript:newCheckWord('xxcj_edit_problem',500,'xxcj_words');",onMouseDown:"javascript:newCheckWord('xxcj_edit_problem',500,'xxcj_words');",placeholder:"请输入问题描述",id:"xxcj_edit_problem"}})])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"secondTitle"},[i("span",[e._v("是否自行处理")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("table",{staticClass:"inp_table",attrs:{id:"cl_table",cellpadding:"0",cellspacing:"0"}},[i("tr",{attrs:{id:"cl_questiontitle_tr"}},[i("td",{staticStyle:{"padding-top":"0.5em"}},[e._v("处理结果")]),e._v(" "),i("td",{attrs:{colspan:"2"}},[i("input",{staticClass:"small gray_dark_font",staticStyle:{color:"#999999"},attrs:{readonly:"true",id:"cl_xxcj_words"}})])]),e._v(" "),i("tr",{attrs:{id:"cl_question_tr"}},[i("td",{attrs:{colspan:"3"}},[i("textarea",{staticStyle:{"text-align":"left","min-height":"5em",padding:"0em 0.5em 0em 1em"},attrs:{onfocus:"newCheckWord('cl_xxcj_edit_problem',500,'cl_xxcj_words')",onKeyUp:"javascript:newCheckWord('cl_xxcj_edit_problem',500,'cl_xxcj_words');",onMouseDown:"javascript:newCheckWord('cl_xxcj_edit_problem',500,'cl_xxcj_words');",placeholder:"请输入问题描述",id:"cl_xxcj_edit_problem"}})])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page_footer"},[i("div",{staticClass:"footer_button_div"},[i("div",{staticClass:"alert_bottom_three orange_background",attrs:{id:"save_returnAddress"}},[e._v("上报")])])])}]},2179:function(e,t,i){"use strict";var o=i(1601),a=i.n(o);a.a},516:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(2177),a=i(1599);for(var r in a)"default"!==r&&function(e){i.d(t,e,function(){return a[e]})}(r);var d=(i(2179),i(0)),c=Object(d.a)(a.default,o.a,o.b,!1,null,null,null);t.default=c.exports}});